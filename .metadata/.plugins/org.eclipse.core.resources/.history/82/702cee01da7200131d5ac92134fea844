package com.jesse.slidingMenu;


import java.util.ArrayList;

import com.jesse.makemoney.R;

import android.os.Bundle;
import android.app.Activity;
import android.content.res.TypedArray;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;

public class MenuFragment extends Fragment implements OnItemClickListener{
	private SLMenuListOnItemClickListener mCallback;  
	private String[] mNavMenuTitles; 
	private TypedArray mNavMenuIconsTypeArray;
//	private ArrayList<NavDrawerItem> mNavDrawerItems;  
	private ListView mDrawerList; 
	
	@Override
	public void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
	}

	// 当Activity中的onCreate方法执行完后调用。
	@Override
	public void onActivityCreated(Bundle savedInstanceState) {
		super.onActivityCreated(savedInstanceState);            
	}
	
	// 首次绘制用户界面的回调方法，必须返回要创建的Fragments 视图UI
	@Override  
    public View onCreateView(LayoutInflater inflater, ViewGroup container,  
            Bundle savedInstanceState) {  
        return inflater.inflate(R.layout.frame_left_menu, null);  
    }  
	
	// activity与fragment之间的通信
	@Override  
    public void onAttach(Activity activity) {  
        try {  
            mCallback = (SLMenuListOnItemClickListener) activity;  
        } catch (ClassCastException e) {  
            throw new ClassCastException(activity.toString()  
                    + " must implement OnResolveTelsCompletedListener");  
        }  
        super.onAttach(activity);  
    }  
	
	private void findView(View rootView) {  
        
        mDrawerList = (ListView) rootView.findViewById(R.id.left_menu);    
          
        mNavMenuTitles = getResources().getStringArray(R.array.setting);    
        // nav drawer icons from resources    
        mNavMenuIconsTypeArray = getResources().obtainTypedArray(R.array.nav_drawer_icons);    
                
//        mNavDrawerItems = new ArrayList<NavDrawerItem>();    
//    
//        // adding nav drawer items to array    
//        // Home    
//        mNavDrawerItems.add(new NavDrawerItem(mNavMenuTitles[0], mNavMenuIconsTypeArray    
//                .getResourceId(0, -1)));    
//        // Find People    
//        mNavDrawerItems.add(new NavDrawerItem(mNavMenuTitles[1], mNavMenuIconsTypeArray    
//                .getResourceId(1, -1)));    
//        // Photos    
//        mNavDrawerItems.add(new NavDrawerItem(mNavMenuTitles[2], mNavMenuIconsTypeArray    
//                .getResourceId(2, -1)));    
//        // Communities, Will add a counter here    
//        mNavDrawerItems.add(new NavDrawerItem(mNavMenuTitles[3], mNavMenuIconsTypeArray    
//                .getResourceId(3, -1), true, "22"));    
//        // Pages    
//        mNavDrawerItems.add(new NavDrawerItem(mNavMenuTitles[4], mNavMenuIconsTypeArray    
//                .getResourceId(4, -1)));    
//        // What's hot, We will add a counter here    
//        mNavDrawerItems.add(new NavDrawerItem(mNavMenuTitles[5], mNavMenuIconsTypeArray    
//                .getResourceId(5, -1), true, "50+"));    
//    
//        // Recycle the typed array    
//        mNavMenuIconsTypeArray.recycle();    
//            
//        // setting the nav drawer list adapter    
//        mAdapter = new NavDrawerListAdapter(getActivity(),    
//                        mNavDrawerItems);    
//        mDrawerList.setAdapter(mAdapter);    
//        mDrawerList.setOnItemClickListener(this);    
//          
//        if(selected!=-1){  
//            mDrawerList.setItemChecked(selected, true);    
//            mDrawerList.setSelection(selected);    
//        }else{  
//            mDrawerList.setItemChecked(0, true);    
//            mDrawerList.setSelection(0);    
//        }  
    }  
	@Override
	public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
		// TODO Auto-generated method stub
		// update selected item and title, then close the drawer    
        if(mCallback!=null){  
            mCallback.selectItem(position, mNavMenuTitles[position]);  
        }  
	}
	/** 
     * 左侧菜单 点击回调接口 
     */  
	public interface SLMenuListOnItemClickListener{  
        public void selectItem(int position,String title);  
    } 
	 
}
