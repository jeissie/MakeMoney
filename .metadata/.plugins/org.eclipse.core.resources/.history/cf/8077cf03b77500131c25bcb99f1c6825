package com.jesse.gallery;

import java.io.File;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

import com.context.ContextUtil;
import com.jesse.model.GetImageOnMain;

import android.annotation.SuppressLint;
import android.content.Context;
import android.graphics.Bitmap;
import android.net.Uri;
import android.os.Environment;
import android.provider.MediaStore;

@SuppressLint("SdCardPath")
public class Util {

	@SuppressWarnings("unused")
	public static List<BitMapGroup> getContent(Context context)
			throws FileNotFoundException, IOException {

		List<BitMapGroup> objects = new ArrayList<BitMapGroup>();

			/***** 读取文件 ******/
			if (GetImageOnMain.getInstance().getBitMapGroup() == null) { // 文件还未开始下载或者下载正在下载中
				/***** 读取缓存文件 ******/
				if (new File(Environment.getExternalStorageDirectory()
						+ "/MakeMoney/cache/main4.jpg") != null) {
					for (int i = 0; i < 5; i++) {
						BitMapGroup accp = new BitMapGroup();
						String fileName = "/MakeMoney/cache/main" + i + ".jpg";
						File temp = new File(
								Environment.getExternalStorageDirectory()
										+ fileName);
						if (temp != null) {
							Bitmap bitmap = MediaStore.Images.Media.getBitmap(
									ContextUtil.getInstance()
											.getContentResolver(), Uri
											.fromFile(temp));
							accp.setMainGalleryBitmap(bitmap);
							objects.add(accp);
						} else {
							objects = null;
						}
					}
					return objects;
				} else {
					// TODO 下载文件
	
				}
			} else {
				/****** ��ȡ����ͼƬ ******/
				BitMapGroup accp1 = new BitMapGroup();
				Bitmap bitmap1 = GetImageOnMain.getMain_galleryBitmap(0);
				if (bitmap1 != null) {
					accp1.setObjphoto(bitmap1);
					objects.add(accp1);
				}
				BitMapGroup accp2 = new BitMapGroup();
				Bitmap bitmap2 = GetImageOnMain.getMain_galleryBitmap(1);
				if (bitmap2 != null) {
					accp2.setObjphoto(bitmap2);
					objects.add(accp2);
				}
				BitMapGroup accp3 = new BitMapGroup();
				Bitmap bitmap3 = GetImageOnMain.getMain_galleryBitmap(2);
				if (bitmap3 != null) {
					accp3.setObjphoto(bitmap3);
					objects.add(accp3);
				}
				BitMapGroup accp4 = new BitMapGroup();
				Bitmap bitmap4 = GetImageOnMain.getMain_galleryBitmap(3);
				if (bitmap4 != null) {
					accp4.setObjphoto(bitmap4);
					objects.add(accp4);
				}
				BitMapGroup accp5 = new BitMapGroup();
				Bitmap bitmap5 = GetImageOnMain.getMain_galleryBitmap(4);
				if (bitmap5 != null) {
					accp5.setObjphoto(bitmap5);
					objects.add(accp5);
				}
				GetImageOnMain.clearBitmap();
				return objects;
			}
		} 
}
